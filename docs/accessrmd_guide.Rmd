---
title: "A Guide To 'accessrmd'."
author: "Richard Leyshon"
date: "`r format(Sys.Date(), '%d %B %Y')`"
output:
  html_document:
    toc: true
    toc_float: true
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

## Introduction


### At A Glance

{accessrmd} is currently in development. If you discover bugs or improvements, 
please review the
[code of conduct](https://github.com/datasciencecampus/accessrmd/blob/main/CODE_OF_CONDUCT.md)
and [contribute on GitHub](https://github.com/r-leyshon/access_rmd_docs/issues).

{accessrmd} is a package written to help improve the accessibility of Rmarkdown
documents. The standard Rmarkdown outputs have HTML structural issues that
result in issues for people using screen readers. The purpose of {accessrmd} is
to help developers in writing accessible Rmarkdown outputs and in converting
a back catalogue of Rmarkdown documents in need of accessibility amendments.

{accessrmd} is currently limited to `html_output` only. It is not available on
CRAN yet, but this is the aim once the first release has been published.

***

### What problem does it solve?

The HTML structure of standard rmarkdown outputs are not AA
[WCAG2.1 standard](https://www.w3.org/WAI/WCAG21/quickref/). AA is the standard
required by all
[UK government digital services](https://www.gov.uk/service-manual/helping-people-to-use-your-service/understanding-wcag). In order to present HTML checks, I will be
enlisting the help of the excellent, open-source
[WAVE accessibility tool](#wave). It doesn't catch everything required for
AA-compliance, but it's a great way to get started with accessibility audits,
with lots of helpful explanations for newcomers to WCAG 2.1 compliance.

The below image shows the output of a WAVE check on the standard Rmarkdown html
output. As you can see, there are a number of errors and warnings. Click the
image for more detail.

<a href="https://wave.webaim.org/report#/https://datasciencecampus.github.io/accessrmd/tests/testfiles/test.html" target="_blank">
  <img src="../www/test_rmd.png" alt="Accessibility check of a standard rmarkdown output showing errors & warnings.">
</a>
Click the image to view the full check on wave.webaim.org, opens in new window.

By executing a few functions from the {accessrmd} package, the html format
issues can be easily remedied, without the developer needing to write any HTML.
Please observe the output of an Rmarkdown which has been adjusted by {accessrmd}
functions (again, you can click for an interactive check):

<a href="https://wave.webaim.org/report#/https://datasciencecampus.github.io/accessrmd/tests/testfiles/accessrmd/test.html" target="_blank">
  <img src="../www/accessrmd.png" alt="Accessibility check of an rmarkdown output modified by acessrmd, showing no errors or warnings.">
</a>
Click the image to view the full check on wave.webaim.org, opens in new window.


***

## Functions Gallery

***

## Github Actions{.tabset}

***

### R CMD Build Check
[![R build status](https://github.com/datasciencecampus/accessrmd/workflows/R-CMD-check/badge.svg)](https://github.com/datasciencecampus/accessrmd/actions)

***

### Test Coverage With Codecov
![Codecov test coverage](https://codecov.io/gh/datasciencecampus/accessrmd/branch/main/graph/badge.svg)

## {.unlisted .unnumbered .toc-ignore}

***

## References

<a id="wave" href="https://wave.webaim.org/" target="_blank">WAVE Web Accessibility Evaluation Tool</a>


***

## More Projects By The Author


### GitHub Projects{.tabset}

#### 'ptspotter' Package

[![CRAN status](https://www.r-pkg.org/badges/version/ptspotter)](https://CRAN.R-project.org/package=ptspotter) [![R build status](https://github.com/r-leyshon/ptspotter/workflows/R-CMD-check/badge.svg)](https://github.com/r-leyshon/ptspotter/actions) ![Codecov test coverage](https://codecov.io/gh/r-leyshon/ptspotter/graph/badge.svg)
[![CRAN RStudio mirror downloads](https://cranlogs.r-pkg.org/badges/grand-total/ptspotter?color=blue)](https://r-pkg.org/pkg/ptspotter)

'ptspotter' is a package that aims to simplify some of the mundane tasks
involved in setting up an analytical pipeline using the fantastic [ProjectTemplate](http://projecttemplate.net/) framework.

[ptspotter is available on CRAN.](https://cran.r-project.org/package=ptspotter)

[ptspotter blog.](https://r-leyshon.github.io/ptspotter_blog/)

***

#### Highways England Traffic Data

<img src="../www/road_data.png" alt="Road data application interface." height = 400>


This data pipeline was redeveloped in December 2020 as Brexit approached. It has
been an important source of road sensor data to help inform the movement of
traffic around English ports. This redevelopment was requested by the faster
economic indicators team.

The redeveloped pipeline features the querying of the Highways England RESTful
webTRIS api in parallel using a virtual environment. Additional value beyond the
MVP was added with a Shiny UI to add data validation and an automated Rmarkdown
report adding insight on the proportion of site types returning null responses.

[Code on GitHub](https://github.com/datasciencecampus/road-data-dump/tree/r-pipeline)

[Documentation on GitHub Pages](https://datasciencecampus.github.io/road-data-pipeline-documentation/)

***

### {.unlisted .unnumbered .toc-ignore}

### Shiny Applications{.tabset}

These applications are presented in reverse order of publication. While the
contexts of the applications vary, they help to illustrate an increasing
maturity in Shiny development.


#### Unifyr

This is an educational application designed to help trainee data scientists in
developing their understanding of the different data join functions available
within the {dplyr} package. Unifyr allows the learner to select subsets from the
well-known gapminder dataset and observe the output of specified join functions.

<a href="https://richleysh84.shinyapps.io/UnifyR/" target="_blank">
  <img src="../www/unifyr.png" alt="Unifyr application interface.">
</a>
Click the image to see Unifyr on shinyapps.io, opens in new window.

***

#### Google Mobility Data

This Google Mobility Data application was developed at the start of the Covid-19
pandemic using data derived by the optical processing of pdf data publications, 
an innovative approach to improving the accessibility of Google's publications.

The application allows the user to select specified local authority or NHS
bodies in order to view the time series mobility data.

<a href="https://richleysh84.shinyapps.io/uk_all_trends/" target="_blank">
  <img src="../www/google_mob.png" alt="Google mobility application interface.">
</a>
Click the image to see Google mobility data on shinyapps.io, opens in new window.

***

#### Welsh School Funding

This application combines 2 open datasets published by Welsh Government:
Budgeted educational revenue and outturn expenditure. The available data
dimensions may be selected from to plot upon the chart axes by educational
phase. Time series data for all available schools and data dimensions may also 
be viewed upon the second tab. 

<a href="https://richleysh84.shinyapps.io/education_combined_scatter_v3/" target="_blank">
  <img src="../www/schools_analysis.png" alt="Schools analysis application interface.">
</a>
Click the image to see Welsh school funding data on shinyapps.io, opens in new
window.


***

#### Common Welsh Place Names

This app was a bit of fun and took very little time. It used some basic language
processing and geolocation to plot Welsh location names with common prefixes 
such as "Cwm" or "Aber" on a map. The application used open data published by
the Welsh Language Commissioner who subsequently approached me to share the
application codebase with them.

<a href="https://richleysh84.shinyapps.io/common_placenames/" target="_blank">
  <img src="../www/common_welsh_names.png" alt="Common Welsh place names application interface.">
</a>
Click the image to see common Welsh place names on shinyapps.io, opens in new
window.

***

#### Cardiff Tide Levels

This repo visualises LiDar altitude data of Cardiff openly published by Natural
Resources Wales. Cardiff was selected due to comparatively high data quality and
population density. The visualisations compare current day high tide altitude
with a modelled 2 metre sea rise by the year 2100.

<a href="https://richleysh84.shinyapps.io/cardiff_maps/" target="_blank">
  <img src="../www/cardiff_sealevels.png" alt="Cardiff sea levels map using LiDar data.">
</a>
Click the image to see common Cardiff high tide levels on shinyapps.io, opens in
new window.

***

### {.unlisted .unnumbered .toc-ignore}

### RPubs{.tabset}

#### Remote Sensing Trees

In 2018 I had been approached by a colleague to discuss the feasibility of using
satellite data to help estimate the quantity of woodland stock in a defined
rural area. The report documents my exploration work done in this area using
open source geospatial frameworks and satellite rasters. The work pointed to 
a promising avenue of analysis but also indicated limitations in the use of open
source landsat imagery. At the time I recommended the procurement of higher
resolution remote imagery and verification of tree counts using ground truth
observational work.

<a href="https://rpubs.com/M_Merciless/trees_from_space" target="_blank">
  <img src="../www/landsat.png" alt="Satellite earth observation of Wales.">
</a>
Click the image to see the counting trees from space exploratory report on
RPubs, opens in new window.

***

#### Welsh Schools Funding 18/19

This {flexdashboard} user interface was one of my first pieces of work in
application development. The dashboard is an adapted RMarkdown output and can 
very easily be reproduced with some basic data manipulation and markdown syntax.
Furthermore, the product is self-contained and can be Emailed and freely shared,
unlike a Shiny application which requires a connection to R and a shiny server.

The dashboard presents Budgeted Education Revenue for financial years 2018/19.
An interactive map of geolocated schools in Wales is presented with informative
tooltips highlighting the data dimensions. In additional tabs, linear regression
models of pupil numbers against delegated budgets for each educational phase are
presented.

<a href="https://rpubs.com/M_Merciless/wales_sch_funding1819" target="_blank">
  <img src="../www/school_map.png" alt="Map of Welsh secondary school locations.">
</a>
Click the image to see the Welsh school funding dashboard on RPubs, opens in new
window.

***

### {.unlisted .unnumbered .toc-ignore}